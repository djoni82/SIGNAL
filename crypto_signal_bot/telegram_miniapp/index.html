<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoAlphaPro - Trading Dashboard</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 16px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(45deg, #00d4ff, #5b73ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 14px;
            color: #a0a0a0;
            margin-bottom: 16px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            color: #000;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #000;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 12px;
            color: #a0a0a0;
        }

        .controls {
            margin-bottom: 24px;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .btn {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-start {
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            color: #000;
        }

        .btn-stop {
            background: linear-gradient(45deg, #ff4757, #ff3838);
            color: #fff;
        }

        .btn-restart {
            background: linear-gradient(45deg, #3742fa, #2f3542);
            color: #fff;
        }

        .btn-status {
            background: linear-gradient(45deg, #ffa502, #ff8c00);
            color: #000;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .leverage-control {
            margin-bottom: 16px;
        }

        .leverage-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            margin: 12px 0;
        }

        .leverage-value {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
            margin: 8px 0;
        }

        .signals-list {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .signal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .signal-item:last-child {
            border-bottom: none;
        }

        .signal-symbol {
            font-weight: bold;
            font-size: 14px;
        }

        .signal-action {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .signal-buy {
            background: #00ff88;
            color: #000;
        }

        .signal-sell {
            background: #ff4757;
            color: #fff;
        }

        .signal-confidence {
            font-size: 12px;
            color: #a0a0a0;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #a0a0a0;
        }

        .footer {
            text-align: center;
            margin-top: 24px;
            padding: 16px;
            color: #666;
            font-size: 12px;
        }

        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .ripple:active:after {
            width: 300px;
            height: 300px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">üöÄ CryptoAlphaPro</div>
            <div class="subtitle">AI-Powered Trading Bot with 50x Leverage</div>
            <div class="status-badge">
                <div class="status-dot"></div>
                <span id="bot-status">READY</span>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="signals-today">0</div>
                <div class="stat-label">Signals Today</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="win-rate">0%</div>
                <div class="stat-label">Win Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-pnl">+0.00%</div>
                <div class="stat-label">Total P&L</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="active-positions">0</div>
                <div class="stat-label">Active Positions</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="control-group">
                <div class="control-title">üéõÔ∏è Bot Control</div>
                <div class="button-grid">
                    <button class="btn btn-start ripple" onclick="startBot()">
                        üöÄ Start
                    </button>
                    <button class="btn btn-stop ripple" onclick="stopBot()">
                        üõë Stop
                    </button>
                    <button class="btn btn-restart ripple" onclick="restartBot()">
                        üîÑ Restart
                    </button>
                    <button class="btn btn-status ripple" onclick="getStatus()">
                        üìä Status
                    </button>
                </div>
            </div>

            <div class="control-group">
                <div class="control-title">‚ö° Leverage Control (1x - 50x)</div>
                <div class="leverage-control">
                    <input type="range" min="1" max="50" value="5" class="leverage-slider" id="leverageSlider" oninput="updateLeverage(this.value)">
                    <div class="leverage-value" id="leverageValue">5x</div>
                </div>
            </div>
        </div>

        <!-- Recent Signals -->
        <div class="signals-list">
            <div class="control-title">üìà Recent Signals</div>
            <div id="signals-container" class="loading">
                Loading signals...
            </div>
        </div>

        <div class="footer">
            ü§ñ Chat ID: 5333574230 | Powered by AI Engine
        </div>
    </div>

    <script>
        // Initialize Telegram WebApp
        const tg = window.Telegram?.WebApp;
        
        if (tg) {
            tg.ready();
            tg.expand();
            tg.MainButton.setText('Trade Now').show();
        }

        // Bot status
        let botActive = false;
        let currentLeverage = 5;

        // Sample data
        const sampleSignals = [
            { symbol: 'BTC/USDT', action: 'BUY', confidence: 92, time: '2 min ago' },
            { symbol: 'ETH/USDT', action: 'SELL', confidence: 87, time: '5 min ago' },
            { symbol: 'BNB/USDT', action: 'BUY', confidence: 94, time: '8 min ago' },
            { symbol: 'SOL/USDT', action: 'BUY', confidence: 89, time: '12 min ago' },
        ];

        // Initialize app
        function initApp() {
            updateStats();
            loadSignals();
            setInterval(updateStats, 30000); // Update every 30 seconds
            setInterval(loadSignals, 60000); // Update signals every minute
        }

        // Bot control functions
        function startBot() {
            botActive = true;
            document.getElementById('bot-status').textContent = 'TRADING';
            showToast('üöÄ Bot Started! Trading with ' + currentLeverage + 'x leverage');
            
            // Send to Telegram bot
            if (tg) {
                tg.sendData(JSON.stringify({
                    action: 'start_bot',
                    leverage: currentLeverage,
                    timestamp: Date.now()
                }));
            }
        }

        function stopBot() {
            botActive = false;
            document.getElementById('bot-status').textContent = 'STOPPED';
            showToast('üõë Bot Stopped! All trading disabled');
            
            if (tg) {
                tg.sendData(JSON.stringify({
                    action: 'stop_bot',
                    timestamp: Date.now()
                }));
            }
        }

        function restartBot() {
            document.getElementById('bot-status').textContent = 'RESTARTING';
            showToast('ÔøΩÔøΩ Restarting bot with fresh configuration...');
            
            setTimeout(() => {
                botActive = true;
                document.getElementById('bot-status').textContent = 'TRADING';
                showToast('‚úÖ Bot restarted successfully!');
            }, 2000);

            if (tg) {
                tg.sendData(JSON.stringify({
                    action: 'restart_bot',
                    leverage: currentLeverage,
                    timestamp: Date.now()
                }));
            }
        }

        function getStatus() {
            const status = {
                active: botActive,
                leverage: currentLeverage,
                signals: document.getElementById('signals-today').textContent,
                winRate: document.getElementById('win-rate').textContent,
                pnl: document.getElementById('total-pnl').textContent
            };
            
            showToast('üìä Status: ' + (botActive ? 'ACTIVE' : 'STOPPED') + ' | Leverage: ' + currentLeverage + 'x');
            
            if (tg) {
                tg.sendData(JSON.stringify({
                    action: 'get_status',
                    status: status,
                    timestamp: Date.now()
                }));
            }
        }

        function updateLeverage(value) {
            currentLeverage = parseInt(value);
            document.getElementById('leverageValue').textContent = value + 'x';
            
            // Update color based on leverage
            const leverageEl = document.getElementById('leverageValue');
            if (value >= 25) {
                leverageEl.style.color = '#ff4757'; // High risk - red
            } else if (value >= 10) {
                leverageEl.style.color = '#ffa502'; // Medium risk - orange
            } else {
                leverageEl.style.color = '#00d4ff'; // Low risk - blue
            }
            
            showToast('‚ö° Leverage set to ' + value + 'x');
        }

        function updateStats() {
            // Simulate real-time stats
            const signalsToday = Math.floor(Math.random() * 20) + 5;
            const winRate = (Math.random() * 30 + 65).toFixed(1);
            const pnl = (Math.random() * 10 - 2).toFixed(2);
            const positions = Math.floor(Math.random() * 5);
            
            document.getElementById('signals-today').textContent = signalsToday;
            document.getElementById('win-rate').textContent = winRate + '%';
            document.getElementById('total-pnl').textContent = (pnl >= 0 ? '+' : '') + pnl + '%';
            document.getElementById('active-positions').textContent = positions;
            
            // Update P&L color
            const pnlEl = document.getElementById('total-pnl');
            pnlEl.style.background = pnl >= 0 ? 
                'linear-gradient(45deg, #00ff88, #00cc6a)' : 
                'linear-gradient(45deg, #ff4757, #ff3838)';
            pnlEl.style.webkitBackgroundClip = 'text';
            pnlEl.style.webkitTextFillColor = 'transparent';
        }

        function loadSignals() {
            const container = document.getElementById('signals-container');
            container.innerHTML = '';
            
            sampleSignals.forEach(signal => {
                const signalEl = document.createElement('div');
                signalEl.className = 'signal-item';
                signalEl.innerHTML = `
                    <div>
                        <div class="signal-symbol">${signal.symbol}</div>
                        <div class="signal-confidence">${signal.confidence}% confidence</div>
                    </div>
                    <div>
                        <div class="signal-action ${signal.action.toLowerCase() === 'buy' ? 'signal-buy' : 'signal-sell'}">
                            ${signal.action}
                        </div>
                        <div class="signal-confidence">${signal.time}</div>
                    </div>
                `;
                container.appendChild(signalEl);
            });
        }

        function showToast(message) {
            // Simple toast notification
            if (tg) {
                tg.HapticFeedback.impactOccurred('light');
            }
            
            // You could implement a toast UI here
            console.log('Toast:', message);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initApp);

        // Handle Telegram WebApp events
        if (tg) {
            tg.onEvent('mainButtonClicked', () => {
                if (botActive) {
                    stopBot();
                } else {
                    startBot();
                }
            });
        }
    </script>
</body>
</html>
